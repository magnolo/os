"use strict";angular.module("djds4rce.angular-socialshare",[]).factory("$FB",["$window",function(a){return{init:function(b){if(!b)throw"FB App Id Cannot be blank";this.fbId=b,a.fbAsyncInit=function(){FB.init({appId:b,channelUrl:"app/channel.html",status:!0,xfbml:!0})},function(a){var b,c="facebook-jssdk",d=a.getElementsByTagName("script")[0];a.getElementById(c)||(b=a.createElement("script"),b.id=c,b.async=!0,b.src="//connect.facebook.net/en_US/all.js",d.parentNode.insertBefore(b,d))}(document)}}}]).directive("facebook",["$timeout","$http",function(a,b){return{scope:{shares:"="},transclude:!0,template:'<div class="facebookButton"><div class="pluginButton"><div class="pluginButtonContainer"><div class="pluginButtonImage"><button type="button"><i class="pluginButtonIcon img sp_plugin-button-2x sx_plugin-button-2x_favblue"></i></button></div><span class="pluginButtonLabel">Share</span></div></div></div><div class="facebookCount"><div class="pluginCountButton pluginCountNum"><span ng-transclude></span></div><div class="pluginCountButtonNub"><s></s><i></i></div></div>',link:function(c,d,e){e.shares&&e.$observe("url",function(){b.get("https://api.facebook.com/method/links.getStats?urls="+e.url+"&format=json").success(function(a){var b=a[0]?a[0].total_count.toString():0,d="";b.length>6?("0"!=b.slice(-6,-5)&&(d="."+b.slice(-6,-5)),b=b.slice(0,-6),b=b+d+"M"):b.length>3&&("0"!=b.slice(-3,-2)&&(d="."+b.slice(-3,-2)),b=b.slice(0,-3),b=b+d+"k"),c.shares=b}).error(function(){c.shares=0})}),a(function(){d.bind("click",function(a){FB.ui({method:"share",href:e.url}),a.preventDefault()})})}}}]).directive("twitter",["$timeout","$window",function(a,b){return{link:function(c,d,e){a(function(){a(function(){twttr.widgets.createShareButton(e.url||b.location.href,d[0],function(){},{count:e.count,text:e.text,via:e.via,size:e.size})})})}}}]).directive("linkedin",["$timeout","$http","$window",function(a,b,c){return{scope:{shares:"="},transclude:!0,template:'<div class="linkedinButton"><div class="pluginButton"><div class="pluginButtonContainer"><div class="pluginButtonImage">in</div><span class="pluginButtonLabel"><span>Share</span></span></div></div></div><div class="linkedinCount"><div class="pluginCountButton"><div class="pluginCountButtonRight"><div class="pluginCountButtonLeft"><span ng-transclude></span></div></div></div></div>',link:function(d,e,f){f.shares&&b.jsonp("http://www.linkedin.com/countserv/count/share?url="+f.link+"&callback=JSON_CALLBACK&format=jsonp").success(function(a){d.shares=a.count.toLocaleString()}).error(function(){d.shares=0}),a(function(){e.bind("click",function(){var a=encodeURIComponent(f.url).replace(/'/g,"%27").replace(/"/g,"%22");c.open("//www.linkedin.com/shareArticle?mini=true&url="+a+"&title="+f.title+"&summary="+f.summary)})})}}}]).directive("gplus",[function(){return{link:function(){"undefined"==typeof gapi&&function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://apis.google.com/js/plusone.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}()}}}]).directive("tumblrText",[function(){return{link:function(a,b,c){var d=document.createElement("a");d.setAttribute("href","http://www.tumblr.com/share/link?url="+encodeURIComponent(c.url)+"&name="+encodeURIComponent(c.name)+"&description="+encodeURIComponent(c.description)),d.setAttribute("title",c.title||"Share on Tumblr"),d.setAttribute("style",c.styling||"display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url('http://platform.tumblr.com/v1/share_1.png') top left no-repeat transparent;"),b.append(d)}}}]).directive("tumblrQoute",[function(){return{link:function(a,b,c){var d=document.createElement("a");d.setAttribute("href","http://www.tumblr.com/share/quote?quote="+encodeURIComponent(c.qoute)+"&source="+encodeURIComponent(c.source)),d.setAttribute("title",c.title||"Share on Tumblr"),d.setAttribute("style",c.styling||"display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url('http://platform.tumblr.com/v1/share_1.png') top left no-repeat transparent;"),b.append(d)}}}]).directive("tumblrImage",[function(){return{link:function(a,b,c){var d=document.createElement("a");d.setAttribute("href","http://www.tumblr.com/share/photo?source="+encodeURIComponent(c.source)+"&caption="+encodeURIComponent(c.caption)+"&clickthru="+encodeURIComponent(c.clickthru)),d.setAttribute("title",c.title||"Share on Tumblr"),d.setAttribute("style",c.styling||"display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url('http://platform.tumblr.com/v1/share_1.png') top left no-repeat transparent;"),b.append(d)}}}]).directive("tumblrVideo",[function(){return{link:function(a,b,c){var d=document.createElement("a");d.setAttribute("href","http://www.tumblr.com/share/video?embed="+encodeURIComponent(c.embedcode)+"&caption="+encodeURIComponent(c.caption)),d.setAttribute("title",c.title||"Share on Tumblr"),d.setAttribute("style",c.styling||"display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url('http://platform.tumblr.com/v1/share_1.png') top left no-repeat transparent;"),b.append(d)}}}]).directive("pintrest",[function(){return{template:'<a href="{{href}}" data-pin-do="{{pinDo}}" data-pin-config="{{pinConfig}}"><img src="//assets.pinterest.com/images/pidgets/pinit_fg_en_rect_gray_20.png" /></a>',link:function(a,b,c){a.href="//www.pinterest.com/pin/create/button/?url="+encodeURIComponent(c.href)+"&media="+encodeURIComponent(c.img)+"&description="+encodeURIComponent(c.description),a.pinDo=c.pinDo||"buttonPin",a.pinConfig=c.pinConfig||"beside"}}}]);
